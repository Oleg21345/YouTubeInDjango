{% extends 'movies/base.html' %}
{% block title %}Watch Later{% endblock %}

{% block content %}
<div class="container py-4">
    <h3 class="mb-4">Watch Later</h3>

    {% if videos %}
    <div class="list-group">
        {% for item in videos %}
        {% with video=item.video %}
        <div class="list-group-item d-flex align-items-center justify-content-between py-2">
            <a href="{% url 'video_detail' video.slug %}"
               class="d-flex align-items-center text-decoration-none text-dark">
                <img src="{{ video.url_photo }}" alt="{{ video.title }}"
                     class="rounded me-2" style="width: 160px; height: 90px; object-fit: cover;">
                <div>
                    <h6 class="mb-1">{{ video.title }}</h6>
                    <p class="mb-0 text-muted small">{{ video.desc|truncatewords:15 }}</p>
                </div>
            </a>
            <div class="dropdown">
                <a class="nav-link dropdown-toggle video-menu-btn" href="#" role="button" id="videoMenu"
                   data-bs-toggle="dropdown" aria-expanded="false">
                    <span style="font-size: 1.2rem;">â‹®</span>
                </a>
                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="videoMenu" style="min-width: 200px;">
                    <li><a class="dropdown-item d-flex align-items-center" href="#"><i class="bi bi-list-ul me-2"></i>
                        Add to queue</a></li>
                    <li><a class="dropdown-item d-flex align-items-center" href="{% url 'watch_later' video.slug %}"><i
                            class="bi bi-clock me-2"></i> Watch later</a></li>
                    <li><a class="dropdown-item d-flex align-items-center" href="#"><i
                            class="bi bi-music-note-list me-2"></i> Add to playlist</a></li>
                    <li><a class="dropdown-item d-flex align-items-center" href="#"><i class="bi bi-download me-2"></i>
                        Download</a></li>
                    <li><a class="dropdown-item d-flex align-items-center" href="#"><i class="bi bi-share me-2"></i>
                        Share</a></li>
                    <li><a class="dropdown-item d-flex align-items-center" href="#"><i class="bi bi-x-circle me-2"></i>
                        Not interested</a></li>
                    <li><a class="dropdown-item d-flex align-items-center" href="#"><i
                            class="bi bi-hand-thumbs-down me-2"></i> Do not recommend from this channel</a></li>
                    <li><a class="dropdown-item d-flex align-items-center" href="#"><i class="bi bi-flag me-2"></i>
                        Complain</a></li>
                </ul>
            </div>
        </div>
        {% endwith %}
        {% endfor %}
    </div>
    {% else %}
    <p class="text-muted text-center mt-5">Your Watch Later list is empty.</p>
    {% endif %}
</div>
{% endblock %}
